<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test des Utilitaires - Dialektos</title>
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/plugins.min.css" />
    
    <style>
        body {
            padding: 40px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-4">ðŸ§ª Tests des Utilitaires Dialektos</h1>
        
        <!-- Test Configuration -->
        <div class="test-section">
            <h3>1. Configuration (CONFIG)</h3>
            <div id="config-test"></div>
        </div>
        
        <!-- Test Utilities -->
        <div class="test-section">
            <h3>2. Utilitaires (AppUtils)</h3>
            <div id="utils-test"></div>
        </div>
        
        <!-- Test API Service -->
        <div class="test-section">
            <h3>3. Service API (ApiService)</h3>
            <div id="api-test"></div>
        </div>
        
        <!-- Test Notifications -->
        <div class="test-section">
            <h3>4. Test Notifications</h3>
            <button class="btn btn-success" id="test-notif-success">Test Success</button>
            <button class="btn btn-danger" id="test-notif-error">Test Error</button>
            <button class="btn btn-warning" id="test-notif-warning">Test Warning</button>
            <button class="btn btn-info" id="test-notif-info">Test Info</button>
        </div>
        
        <!-- Test DataTable -->
        <div class="test-section">
            <h3>5. Test DataTable</h3>
            <table id="test-table" class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nom</th>
                        <th>Email</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>1</td><td>Jean Dupont</td><td>jean@example.com</td></tr>
                    <tr><td>2</td><td>Marie Martin</td><td>marie@example.com</td></tr>
                    <tr><td>3</td><td>Pierre Durand</td><td>pierre@example.com</td></tr>
                    <tr><td>4</td><td>Sophie Bernard</td><td>sophie@example.com</td></tr>
                    <tr><td>5</td><td>Luc Petit</td><td>luc@example.com</td></tr>
                </tbody>
            </table>
            <div id="datatable-test"></div>
        </div>
        
        <!-- Console Output -->
        <div class="test-section">
            <h3>6. Console Output</h3>
            <p>Ouvrez la console du navigateur (F12) pour voir les logs dÃ©taillÃ©s.</p>
        </div>
    </div>
    
    <!-- jQuery -->
    <script src="assets/js/core/jquery-3.7.1.min.js"></script>
    <script src="assets/js/core/bootstrap.min.js"></script>
    
    <!-- Axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    
    <!-- Bootstrap Notify -->
    <script src="assets/js/plugin/bootstrap-notify/bootstrap-notify.min.js"></script>
    
    <!-- DataTables -->
    <script src="assets/js/plugin/datatables/datatables.min.js"></script>
    
    <!-- Configuration et Utilitaires (dans le bon ordre) -->
    <script src="assets/js/API/config.js"></script>
    <script src="assets/js/API/utilities.js"></script>
    <script src="assets/js/API/base.js"></script>
    <script src="assets/js/API/api-service.js"></script>
    
    <script>
        console.log("==========================================");
        console.log("ðŸ§ª DÃ‰BUT DES TESTS");
        console.log("==========================================\n");
        
        // ===== TEST 1: Configuration =====
        function testConfig() {
            const configTest = document.getElementById('config-test');
            const tests = [];
            
            console.log("ðŸ“‹ Test 1: Configuration");
            
            // Test BASE_URL
            if (CONFIG && CONFIG.BASE_URL) {
                tests.push({ name: 'CONFIG.BASE_URL', status: 'success', value: CONFIG.BASE_URL });
                console.log("âœ… CONFIG.BASE_URL:", CONFIG.BASE_URL);
            } else {
                tests.push({ name: 'CONFIG.BASE_URL', status: 'error', value: 'Non dÃ©fini' });
                console.error("âŒ CONFIG.BASE_URL non dÃ©fini");
            }
            
            // Test ENDPOINTS
            if (CONFIG && CONFIG.ENDPOINTS) {
                tests.push({ name: 'CONFIG.ENDPOINTS', status: 'success', value: `${Object.keys(CONFIG.ENDPOINTS).length} endpoints` });
                console.log("âœ… CONFIG.ENDPOINTS:", CONFIG.ENDPOINTS);
            } else {
                tests.push({ name: 'CONFIG.ENDPOINTS', status: 'error', value: 'Non dÃ©fini' });
                console.error("âŒ CONFIG.ENDPOINTS non dÃ©fini");
            }
            
            // Test MESSAGES
            if (CONFIG && CONFIG.MESSAGES) {
                tests.push({ name: 'CONFIG.MESSAGES', status: 'success', value: 'DÃ©fini' });
                console.log("âœ… CONFIG.MESSAGES dÃ©fini");
            } else {
                tests.push({ name: 'CONFIG.MESSAGES', status: 'error', value: 'Non dÃ©fini' });
                console.error("âŒ CONFIG.MESSAGES non dÃ©fini");
            }
            
            // Afficher les rÃ©sultats
            tests.forEach(test => {
                configTest.innerHTML += `
                    <div class="test-result ${test.status}">
                        <strong>${test.name}:</strong> ${test.value}
                    </div>
                `;
            });
            
            console.log("\n");
        }
        
        // ===== TEST 2: Utilities =====
        function testUtilities() {
            const utilsTest = document.getElementById('utils-test');
            const tests = [];
            
            console.log("ðŸ› ï¸  Test 2: Utilitaires (AppUtils)");
            
            // Test existence de AppUtils
            if (window.AppUtils) {
                tests.push({ name: 'window.AppUtils', status: 'success', value: 'Disponible' });
                console.log("âœ… window.AppUtils disponible");
                
                // Test des fonctions
                const functions = [
                    'showNotification',
                    'getAuthToken',
                    'getAuthHeaders',
                    'handleApiError',
                    'validateForm',
                    'initDataTable',
                    'formatDate'
                ];
                
                functions.forEach(fn => {
                    if (typeof AppUtils[fn] === 'function') {
                        tests.push({ name: `AppUtils.${fn}()`, status: 'success', value: 'OK' });
                        console.log(`âœ… AppUtils.${fn}() disponible`);
                    } else {
                        tests.push({ name: `AppUtils.${fn}()`, status: 'error', value: 'Manquant' });
                        console.error(`âŒ AppUtils.${fn}() manquant`);
                    }
                });
            } else {
                tests.push({ name: 'window.AppUtils', status: 'error', value: 'Non disponible' });
                console.error("âŒ window.AppUtils non disponible");
            }
            
            // Afficher les rÃ©sultats
            tests.forEach(test => {
                utilsTest.innerHTML += `
                    <div class="test-result ${test.status}">
                        <strong>${test.name}:</strong> ${test.value}
                    </div>
                `;
            });
            
            console.log("\n");
        }
        
        // ===== TEST 3: API Service =====
        function testApiService() {
            const apiTest = document.getElementById('api-test');
            const tests = [];
            
            console.log("ðŸŒ Test 3: Service API (ApiService)");
            
            if (window.ApiService) {
                tests.push({ name: 'window.ApiService', status: 'success', value: 'Disponible' });
                console.log("âœ… window.ApiService disponible");
                
                // Test des mÃ©thodes
                const methods = ['get', 'post', 'put', 'delete', 'postFormData'];
                
                methods.forEach(method => {
                    if (typeof ApiService[method] === 'function') {
                        tests.push({ name: `ApiService.${method}()`, status: 'success', value: 'OK' });
                        console.log(`âœ… ApiService.${method}() disponible`);
                    } else {
                        tests.push({ name: `ApiService.${method}()`, status: 'error', value: 'Manquant' });
                        console.error(`âŒ ApiService.${method}() manquant`);
                    }
                });
            } else {
                tests.push({ name: 'window.ApiService', status: 'error', value: 'Non disponible' });
                console.error("âŒ window.ApiService non disponible");
            }
            
            // Afficher les rÃ©sultats
            tests.forEach(test => {
                apiTest.innerHTML += `
                    <div class="test-result ${test.status}">
                        <strong>${test.name}:</strong> ${test.value}
                    </div>
                `;
            });
            
            console.log("\n");
        }
        
        // ===== TEST 4: DataTable =====
        function testDataTable() {
            const datatableTest = document.getElementById('datatable-test');
            
            console.log("ðŸ“Š Test 4: DataTable");
            
            try {
                AppUtils.initDataTable('test-table');
                datatableTest.innerHTML = `
                    <div class="test-result success">
                        <strong>DataTable:</strong> InitialisÃ© avec succÃ¨s
                    </div>
                `;
                console.log("âœ… DataTable initialisÃ© avec succÃ¨s");
            } catch (error) {
                datatableTest.innerHTML = `
                    <div class="test-result error">
                        <strong>DataTable:</strong> Erreur - ${error.message}
                    </div>
                `;
                console.error("âŒ Erreur DataTable:", error);
            }
            
            console.log("\n");
        }
        
        // ===== TEST 5: Notifications =====
        document.getElementById('test-notif-success').addEventListener('click', () => {
            AppUtils.showNotification('success', 'Test de notification rÃ©ussie !', 'SuccÃ¨s');
        });
        
        document.getElementById('test-notif-error').addEventListener('click', () => {
            AppUtils.showNotification('danger', 'Test de notification d\'erreur !', 'Erreur');
        });
        
        document.getElementById('test-notif-warning').addEventListener('click', () => {
            AppUtils.showNotification('warning', 'Test de notification d\'avertissement !', 'Avertissement');
        });
        
        document.getElementById('test-notif-info').addEventListener('click', () => {
            AppUtils.showNotification('info', 'Test de notification d\'information !', 'Information');
        });
        
        // ExÃ©cuter les tests au chargement
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                testConfig();
                testUtilities();
                testApiService();
                testDataTable();
                
                console.log("==========================================");
                console.log("âœ… TESTS TERMINÃ‰S");
                console.log("==========================================");
            }, 500);
        });
    </script>
</body>
</html>


